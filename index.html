
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sierpi≈Ñski Numerical Laboratory | Advanced Research Suite</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:italic,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00bcd4;
            --secondary: #0a192f;
            --tertiary: #112240;
            --accent: #64ffda;
            --text-main: #e6f1ff;
            --text-dim: #8892b0;
            --paper: #f8f9fa;
            --danger: #ff4d4d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--secondary);
            color: var(--text-main);
            line-height: 1.7;
            overflow-x: hidden;
        }

        /* --- NAVIGATION --- */
        nav {
            position: fixed;
            top: 0; left: 0; width: 80px; height: 100vh;
            background: rgba(2, 12, 27, 0.95);
            display: flex; flex-direction: column;
            align-items: center; border-right: 1px solid var(--tertiary);
            z-index: 1000; padding: 20px 0;
        }

        .nav-item {
            width: 50px; height: 50px; margin-bottom: 20px;
            cursor: pointer; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid transparent; color: var(--text-dim);
        }

        .nav-item:hover { color: var(--primary); background: rgba(0, 188, 212, 0.1); }
        .nav-item.active { color: var(--primary); border-color: var(--primary); background: rgba(0, 188, 212, 0.15); }

        /* --- MAIN LAYOUT --- */
        main { margin-left: 80px; padding: 40px; }
        
        .container { max-width: 1400px; margin: 0 auto; }

        .section { display: none; animation: pageIn 0.6s ease; }
        .section.active { display: block; }

        @keyframes pageIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- PAPER STYLING (The Abstract/Theory) --- */
        .academic-page {
            background: var(--paper);
            color: #1a1a1a; padding: 80px;
            border-radius: 4px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-width: 900px; margin: 0 auto 50px auto;
            position: relative;
        }

        .academic-page::before {
            content: "INTERNAL RESEARCH DOCUMENT - NOT FOR REDISTRIBUTION";
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            font-size: 10px; color: #ccc; letter-spacing: 2px;
        }

        .paper-title { font-family: 'Crimson Pro', serif; font-size: 3.2em; line-height: 1.1; margin-bottom: 10px; text-align: center; }
        .paper-authors { text-align: center; font-style: italic; margin-bottom: 40px; color: #666; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        
        .abstract-box { background: #f0f0f0; padding: 30px; font-style: italic; margin-bottom: 40px; border-left: 5px solid #333; }
        
        .formula-display {
            background: #222; color: var(--accent);
            padding: 25px; border-radius: 8px; font-family: 'JetBrains Mono', monospace;
            text-align: center; margin: 30px 0; font-size: 1.2em;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
        }

        /* --- LAB INSTRUMENTS (Visualizer) --- */
        .lab-grid { display: grid; grid-template-columns: 350px 1fr; gap: 30px; }
        
        .sidebar-controls {
            background: var(--tertiary); padding: 25px;
            border-radius: 12px; height: fit-content;
            position: sticky; top: 40px;
        }

        .control-group { margin-bottom: 20px; }
        .control-group label { display: block; color: var(--primary); font-size: 12px; font-weight: 800; margin-bottom: 8px; letter-spacing: 1px; }
        
        input[type="number"], select {
            width: 100%; background: #0a192f; border: 1px solid #233554;
            color: #fff; padding: 12px; border-radius: 6px; font-family: 'JetBrains Mono';
        }

        .btn-run {
            width: 100%; background: var(--primary); color: var(--secondary);
            border: none; padding: 15px; font-weight: 800; border-radius: 6px;
            cursor: pointer; text-transform: uppercase; letter-spacing: 2px;
            transition: 0.3s;
        }

        .btn-run:hover { background: var(--accent); transform: scale(1.02); }

        canvas {
            width: 100%; border: 1px solid #233554;
            background: #000; border-radius: 12px; cursor: crosshair;
        }

        /* --- DATA TABLES --- */
        .data-table {
            width: 100%; border-collapse: collapse; margin-top: 30px;
            font-size: 14px; background: rgba(255,255,255,0.02);
        }
        .data-table th, .data-table td { padding: 12px; border: 1px solid #233554; text-align: left; }
        .data-table th { color: var(--primary); background: rgba(0, 188, 212, 0.1); }

        /* --- EXPORT MODAL --- */
        #exportModal {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(2,12,27,0.98); z-index: 2000; display: none;
            justify-content: center; align-items: center;
        }

        .modal-content {
            background: var(--tertiary); width: 600px; padding: 50px;
            border-radius: 20px; border: 1px solid var(--primary);
        }

        /* Responsive */
        @media (max-width: 1000px) {
            .lab-grid { grid-template-columns: 1fr; }
            nav { width: 100%; height: 60px; flex-direction: row; bottom: 0; top: auto; border-right: none; border-top: 1px solid var(--tertiary); }
            main { margin-left: 0; margin-bottom: 60px; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="nav-item active" data-target="abstract" title="Theory & Abstract">üìú</div>
        <div class="nav-item" data-target="laboratory" title="Numerical Lab">üß™</div>
        <div class="nav-item" data-target="lattice" title="Coordinate Matrix">üï∏Ô∏è</div>
        <div class="nav-item" data-target="analytics" title="Statistical Metrics">üìä</div>
        <div class="nav-item" data-target="history" title="Research Archive">üìö</div>
    </nav>

    <main>
        <section id="abstract" class="section active">
            <div class="academic-page">
                <h1 class="paper-title">Computational Limitations of the Sierpi≈Ñski Quadratic Sieve</h1>
                <p class="paper-authors">Principal Investigator: AI Thought Partner | Date: 2025 | Ref: SN-7742</p>
                
                <div class="abstract-box">
                    <strong>Abstract:</strong> This document details the numerical exploration of a subset of natural numbers defined by their exclusion from four specific quadratic forms. The problem, rooted in the mid-20th-century work of Wac≈Çaw Sierpi≈Ñski, investigates whether the set of integers remaining "uncovered" by the expansion of $(3a \pm 1)(2b \pm 1) - 1$ is infinite. Our research utilizes a high-performance JavaScript-based sieve to analyze density decay and residue bias up to $10^5$.
                </div>

                <h3>1. Introduction</h3>
                <p>The Sierpi≈Ñski problem sits at the intersection of multiplicative number theory and quadratic residues. We define the "Coverage Set" $C$ as:</p>
                <div class="formula-display">
                    C = { n | n = 6ab + a + b ‚à® 6ab + a - b ‚à® 6ab - a + b ‚à® 6ab - a - b }
                </div>
                <p>The fundamental inquiry concerns the complement set $U = \mathbb{N} \setminus C$. Numerical evidence suggests $U$ is thin but non-empty for all $N$.</p>

                <h3>2. The Geometric Interpretation</h3>
                <p>When visualized in the $(a, b)$ plane, the equations represent hyperbolic surfaces. As $a$ and $b$ increase, the "density" of claimed integers increases, yet specific modular "corridors" remain unpopulated. This provides a visual bridge to the Prime Number Theorem.</p>
                

                <h3>3. Modular Constraints</h3>
                <p>Analytical derivation proves that all $n \notin U$ (covered) can be expressed as residues of specific primes. Conversely, members of $U$ are highly concentrated in the residues $1 \pmod 6$ and $5 \pmod 6$.</p>
            </div>
        </section>

        <section id="laboratory" class="section">
            <div class="lab-grid">
                <div class="sidebar-controls">
                    <h3>Simulation Tuning</h3>
                    <hr style="margin: 15px 0; opacity: 0.1;">
                    
                    <div class="control-group">
                        <label>Integer Ceiling (N)</label>
                        <input type="number" id="lab_N" value="5000" step="500">
                    </div>

                    <div class="control-group">
                        <label>Sieve Depth (a,b)</label>
                        <input type="number" id="lab_AB" value="60">
                    </div>

                    <div class="control-group">
                        <label>Analysis Mode</label>
                        <select id="lab_mode">
                            <option value="heat">Frequency Heatmap</option>
                            <option value="bin">Binary Coverage</option>
                            <option value="gap">Gap Proximity</option>
                        </select>
                    </div>

                    <button class="btn-run" onclick="executeLaboratoryUpdate()">Update Engine</button>
                    
                    <div id="live_stats" style="margin-top: 30px; font-size: 13px; font-family: 'JetBrains Mono';">
                        <p style="color:var(--text-dim)">Initializing system...</p>
                    </div>
                </div>

                <div class="main-display">
                    <canvas id="lab_canvas" width="1000" height="600"></canvas>
                    
                    <div class="paper-section" style="margin-top: 20px; background: var(--tertiary); padding: 25px; border-radius: 12px;">
                        <h4 style="color:var(--primary); margin-bottom: 10px;">Calculated Uncovered Indices (Top 50)</h4>
                        <div id="uncovered_indices" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="lattice" class="section">
            <h2 style="margin-bottom: 20px; color: var(--primary);">Global Parameter Space (a vs b)</h2>
            <p style="color: var(--text-dim); margin-bottom: 30px;">Each node represents an $(a, b)$ pair. Colors indicate the value of $n \pmod{360}$.</p>
            <canvas id="lattice_canvas" width="1200" height="700"></canvas>
            
        </section>

        <section id="analytics" class="section">
            <div class="lab-grid">
                <div class="chart-container">
                    <h3 style="color:var(--primary)">Residue Distribution (Mod 6)</h3>
                    <canvas id="residue_canvas" width="800" height="400"></canvas>
                </div>
                <div class="sidebar-controls">
                    <h4 style="color:var(--accent)">Statistical Summary</h4>
                    <table class="data-table">
                        <tr><td>Mean Gap</td><td id="stat_mean_gap">-</td></tr>
                        <tr><td>Max Gap</td><td id="stat_max_gap">-</td></tr>
                        <tr><td>Shannon Entropy</td><td id="stat_entropy">-</td></tr>
                        <tr><td>Bias Factor</td><td id="stat_bias">-</td></tr>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <div id="exportModal">
        <div class="modal-content">
            <h2 style="color:var(--primary)">Scientific Export Engine</h2>
            <p style="margin: 20px 0; color: var(--text-dim);">Select quality for paper inclusion. 8K resolution requires high-memory buffer.</p>
            
            <label style="color:var(--accent)">Output Resolution</label>
            <select id="export_res" style="margin-top:10px;">
                <option value="1">1080p (Standard)</option>
                <option value="2">2K (High Resolution)</option>
                <option value="4">4K (Publication Quality)</option>
                <option value="8">8K (Maximum Detail)</option>
            </select>

            <div style="margin-top:30px; display:flex; gap:10px;">
                <button class="btn-run" onclick="generateExportPackage()">Generate Image</button>
                <button class="btn-run" onclick="closeExportModal()" style="background:#233554; color:#8892b0;">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // --- System State ---
        const State = {
            activeSection: 'abstract',
            N: 5000,
            AB: 60,
            data: null
        };

        // --- Initialization ---
        window.onload = () => {
            setupNavigation();
            executeLaboratoryUpdate();
        };

        function setupNavigation() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.onclick = () => {
                    document.querySelectorAll('.nav-item, .section').forEach(el => el.classList.remove('active'));
                    item.classList.add('active');
                    const target = item.getAttribute('data-target');
                    document.getElementById(target).classList.add('active');
                    
                    // Trigger specific renders
                    if(target === 'laboratory') executeLaboratoryUpdate();
                    if(target === 'lattice') renderLatticeGlobal();
                    if(target === 'analytics') renderAnalyticalDashboard();
                };
            });
        }

        // --- Numerical Sieve Core ---
        function runSieve(N, AB) {
            const covered = new Uint8Array(N + 1);
            const freq = new Int32Array(N + 1);
            
            for(let a = 1; a <= AB; a++) {
                for(let b = 1; b <= AB; b++) {
                    const vals = [
                        6*a*b + a + b, 6*a*b + a - b,
                        6*a*b - a + b, 6*a*b - a - b
                    ];
                    vals.forEach(v => {
                        if(v > 0 && v <= N) {
                            covered[v] = 1;
                            freq[v]++;
                        }
                    });
                }
            }

            const uncovered = [];
            for(let i = 1; i <= N; i++) if(covered[i] === 0) uncovered.push(i);

            return { covered, freq, uncovered, N, AB };
        }

        // --- UI Rendering Engines ---
        function executeLaboratoryUpdate() {
            const N = parseInt(document.getElementById('lab_N').value);
            const AB = parseInt(document.getElementById('lab_AB').value);
            const mode = document.getElementById('lab_mode').value;
            
            const start = performance.now();
            const data = runSieve(N, AB);
            const end = performance.now();
            State.data = data;

            // Update Stats UI
            document.getElementById('live_stats').innerHTML = `
                <span style="color:var(--accent)">> Sieve complete in ${(end-start).toFixed(2)}ms</span><br>
                <span>> Coverage Rate: ${(( (N-data.uncovered.length)/N ) * 100).toFixed(2)}%</span><br>
                <span>> Density: ${( (N-data.uncovered.length)/N ).toFixed(4)}</span>
            `;

            const list = document.getElementById('uncovered_indices');
            list.innerHTML = data.uncovered.slice(0, 50).map(n => `<div style="background:#0a192f; border:1px solid var(--primary); padding:4px 8px; font-family:'JetBrains Mono'; font-size:12px; border-radius:4px;">${n}</div>`).join('');

            drawLabCanvas(data, mode);
        }

        function drawLabCanvas(data, mode) {
            const canvas = document.getElementById('lab_canvas');
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#000'; ctx.fillRect(0,0,1000,600);

            const cols = 80;
            const rows = Math.ceil(data.N / cols);
            const size = canvas.width / cols;

            for(let i=1; i<=data.N; i++) {
                const x = ((i-1) % cols) * size;
                const y = Math.floor((i-1) / cols) * size;

                if(mode === 'bin') {
                    ctx.fillStyle = data.covered[i] ? 'rgba(0,188,212,0.8)' : '#ff4d4d';
                } else if(mode === 'heat') {
                    const alpha = Math.min(data.freq[i] * 0.1, 1);
                    ctx.fillStyle = data.covered[i] ? `rgba(100,255,218,${alpha})` : '#ff4d4d';
                } else {
                    const gap = i - (data.uncovered[data.uncovered.findIndex(u => u >= i)-1] || 0);
                    ctx.fillStyle = `hsl(200, 100%, ${Math.min(gap*5, 70)}%)`;
                }
                
                ctx.fillRect(x, y, size-0.5, size-0.5);
            }
        }

        function renderLatticeGlobal() {
            const canvas = document.getElementById('lattice_canvas');
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#050a15'; ctx.fillRect(0,0,1200,700);

            const res = 80;
            for(let a=1; a<res; a++) {
                for(let b=1; b<res; b++) {
                    const x = (a/res)*1100 + 50;
                    const y = (b/res)*600 + 50;
                    const val = 6*a*b + a + b;
                    ctx.fillStyle = `hsl(${(val % 360)}, 80%, 60%)`;
                    ctx.beginPath(); ctx.arc(x,y, 2, 0, Math.PI*2); ctx.fill();
                }
            }
        }

        function renderAnalyticalDashboard() {
            const d = State.data;
            const mods = new Array(6).fill(0);
            d.uncovered.forEach(n => mods[n%6]++);

            const canvas = document.getElementById('residue_canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0,0,800,400);

            mods.forEach((v, i) => {
                const h = (v/Math.max(...mods)) * 300;
                ctx.fillStyle = varColor('--primary');
                ctx.fillRect(100 + i*100, 350-h, 60, h);
                ctx.fillStyle = '#fff';
                ctx.fillText(`Mod ${i}`, 110 + i*100, 370);
            });

            // Update Sidebar Data
            const gaps = [];
            for(let i=1; i<d.uncovered.length; i++) gaps.push(d.uncovered[i] - d.uncovered[i-1]);
            document.getElementById('stat_mean_gap').innerText = (gaps.reduce((a,b)=>a+b,0)/gaps.length).toFixed(2);
            document.getElementById('stat_max_gap').innerText = Math.max(...gaps);
        }

        function varColor(name) {
            return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
        }

        // --- Export Logic ---
        function generateExportPackage() {
            const scale = parseInt(document.getElementById('export_res').value);
            const mainCanvas = document.getElementById('lab_canvas');
            
            const master = document.createElement('canvas');
            master.width = 3840 * (scale/4); // Base 4k scale
            master.height = 2160 * (scale/4);
            const mctx = master.getContext('2d');

            mctx.fillStyle = '#0a192f'; mctx.fillRect(0,0,master.width, master.height);
            mctx.drawImage(mainCanvas, 100, 100, master.width-200, master.height-600);
            
            // Branding and Metadata
            mctx.fillStyle = '#00bcd4';
            mctx.font = 'bold 40px Inter';
            mctx.fillText("SIERPINSKI NUMERICAL DATA EXPORT", 100, master.height - 300);
            
            const link = document.createElement('a');
            link.download = `Sierpinski_Research_Suite_${Date.now()}.png`;
            link.href = master.toDataURL();
            link.click();
        }

        function closeExportModal() { document.getElementById('exportModal').style.display = 'none'; }
        function openExport() { document.getElementById('exportModal').style.display = 'flex'; }
    </script>
</body>
</html>
